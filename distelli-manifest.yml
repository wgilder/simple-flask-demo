walter.gildersleeve/simple-flask-demo:

  Env:
  PreBuild:
  Build:
### Docker Build Commands ###
    - docker login -u "$DISTELLI_DOCKER_USERNAME" -p "$DISTELLI_DOCKER_PW" $DISTELLI_DOCKER_ENDPOINT
    - docker build --quiet=false -t "$DISTELLI_DOCKER_REPO" $DISTELLI_DOCKER_PATH
    - echo Pushing to Docker repo "$DISTELLI_DOCKER_REPO"
    - docker tag "$DISTELLI_DOCKER_REPO" "$DISTELLI_DOCKER_REPO:$DISTELLI_BUILDNUM"
    - docker push "$DISTELLI_DOCKER_REPO:$DISTELLI_BUILDNUM"
### End Docker Build Commands ###
  PkgInclude:
  PkgExclude:
  PreInstall:
    - echo "Ensuring Docker present"
    - sudo yum install -y yum-utils device-mapper-persistent-data lvm2
    - sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
    - sudo yum install -y docker-ce
    - sudo systemctl start docker
  PostInstall:
  Exec:
    - echo "#################"
    - echo "Exec Starting."
    - echo DISTELLI_APPHOME == $DISTELLI_APPHOME
    - echo DISTELLI_INSTALLHOME == $DISTELLI_INSTALLHOME
    - echo DISTELLI_APPNAME == $DISTELLI_APPNAME
    - echo DISTELLI_BUILDNUM == $DISTELLI_BUILDNUM
    - echo DISTELLI_ENV == $DISTELLI_ENV
    - echo DISTELLI_RELBRANCH == $DISTELLI_RELBRANCH
    - echo DISTELLI_RELEASE == $DISTELLI_RELEASE
    - echo DISTELLI_RELREPOTYPE == $DISTELLI_RELREPOTYPE
    - echo DISTELLI_RELREVISION == $DISTELLI_RELREVISION
    - echo DISTELLI_RELVERSION == $DISTELLI_RELVERSION
    - echo "#################"
    - echo "#################"
    - sudo docker run -p 80:5000 wmgildersleeve/flask-demo
